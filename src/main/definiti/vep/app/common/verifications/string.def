package vep.app.common.verifications

type Email = String {
  verify {
    "L'adresse e-mail est invalide"
    (string) => {
      string.matches("^([a-zA-Z0-9.!#$%&’'*+/=?^_`{|}~-]+)@([a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*)$")
    }
  }
}

type NonEmptyString = String {
  verify {
    "Veuillez renseigner le champ"
    (string) => {
      string.nonEmpty()
    }
  }
}

type RequiredString = String verifying IsNonBlank
verification IsNonBlank {
  "Veuillez renseigner le champ"
  (string: String) => {
    string.trim().nonEmpty()
  }
}

type Canonical = String {
  verify {
    "Le format d'url est invalide (caractères autorisés: lettres minuscules, chiffres et -)"
    (string) => {
      string.matches("^[a-zA-Z0-9-]+$")
    }
  }
}